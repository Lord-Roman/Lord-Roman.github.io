var dice,log=console.log,key=1,difficult=6,difficult__change=0,success=0,fail=0,flawless=0,charm=1,rez=[];function randomInteger(e,c){var i=e-.5+Math.random()*(c-e+1);return Math.round(i)}function roll(){$(".monitor").html(""),getRandom(key).forEach(function(e){let c='<span style="color:rgb(255,'+e.color+');">'+e.value+"</span>";$(".monitor").append(c),$(".monitor").append(",")}),$(".success__number").text(success),$(".fail__number").text(fail),$(".flawless__number").text(flawless)}function getDice(){return randomInteger(1,10)}function rethrow(e){e?e-=60:e=180;let c={color:e+","+e,value:dice=getDice()};rez.push(c),dice>=difficult&&(success++,flawless++),10==dice&&rethrow(e)}function Charm(e){if(charm&&1==e){charm--,e=Charm(getDice())}return e}function getRandom(e){success=0,fail=0,flawless=0,dice=0,charm=0,rez=[],e>=6&&charm++,e>=8&&charm++,10==e&&charm++;for(var c=0;c<e;c++){let e={color:"255,255",value:dice=Charm(dice=getDice())};rez.push(e),dice>=difficult&&(success++,flawless++),1==dice&&(fail++,success--),10==dice&&rethrow()}return log(rez),rez}$(function(){$(document).keydown(function(e){"Shift"==e.key&&(difficult__change=1)}),$(document).keyup(function(e){var c=0;log(e.key),log(e.keyCode),log("difficult__change",difficult__change),difficult__change&&(e.keyCode>48&&e.keyCode<=57?difficult=e.keyCode-48:48==e.keyCode&&(difficult=e.keyCode-38),$(".difficulty__number").text(difficult)),"Shift"==e.key&&(difficult__change=0),e.key>=1&&e.key<=9?(key=e.key,c=1):0==e.key&&(key=10,c=1),e.keyCode>95&&e.keyCode<=105&&(key=1*key+10,c=1),log(key),c&&roll()})});
