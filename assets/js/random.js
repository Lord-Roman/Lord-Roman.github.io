var dice,log=console.log,key=1,difficult=6,difficult__change=0,success=0,fail=0,flawless=0,charm=1,rez=[];function randomInteger(e,t){var c=e-.5+Math.random()*(t-e+1);return Math.round(c)}function roll(){$(".monitor").html(""),getRandom(key).forEach(function(e){let t='<span style="color:rgb(255,'+e.color+');">'+e.value+"</span>";$(".monitor").append(t),$(".monitor").append(",")}),$(".success__number").text(success),$(".fail__number").text(fail),$(".flawless__number").text(flawless)}function getDice(){return randomInteger(1,10)}function rethrow(e){e?e-=60:e=180;let t={color:e+","+e,value:dice=getDice()};rez.push(t),dice>=difficult&&(success++,flawless++),10==dice&&rethrow(e)}function Charm(e){if(charm&&1==e){charm--,e=Charm(getDice())}return e}function getRandom(e){document.getElementById("img").style.display="none",success=0,fail=0,flawless=0,dice=0,charm=0,rez=[],e>=7&&charm++,e>=8&&charm++,10==e&&charm++;let t=randomInteger(1,e);for(var c=0;c<e;c++){let e={color:"255,255",value:dice=Charm(dice=getDice())};dice>=difficult&&(success++,flawless++,c==t&&(e.color="0,255",document.getElementById("img").style.display="block",document.getElementById("img").style.right=randomInteger(0,window.innerWidth-200)+"px",document.getElementById("img").style.top=randomInteger(0,window.innerHeight-200)+"px")),1==dice&&(fail++,success--),rez.push(e),10==dice&&rethrow()}return log(rez),rez}$(function(){$(document).keydown(function(e){"Shift"==e.key&&(difficult__change=1)}),$(document).keyup(function(e){var t=0;log(e.key),log(e.keyCode),log("difficult__change",difficult__change),difficult__change&&(e.keyCode>48&&e.keyCode<=57?difficult=e.keyCode-48:48==e.keyCode&&(difficult=e.keyCode-38),$(".difficulty__number").text(difficult)),"Shift"==e.key&&(difficult__change=0),e.key>=1&&e.key<=9?(key=e.key,t=1):0==e.key&&(key=10,t=1),e.keyCode>95&&e.keyCode<=105&&(key=1*key+10,t=1),log(key),t&&roll()})});
